<LoginScreen>:
    BoxLayout:
        orientation:'vertical'
        spacing: 0
        size_hint: (0.5, 0.3)
        pos_hint: {'center_x': 0.5, 'center_y': 0.5}

        BoxLayout:
            orientation:'vertical'
            spacing: 0
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.5
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [5]
                Color:
                    rgba: app.color_scheme
                Line:
                    width: 1
                    rounded_rectangle: (self.x, self.y, self.width, self.height, 8)

            TextInput:
                id: username_input
                hint_text: 'username' 
                font_name: app.current_font
                font_size: 70
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                valign: 'middle'
                halign: 'center'
                background_color: 0, 0, 0, 0.5
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme
                multiline: False

            TextInput:
                id: password_input
                hint_text: 'password' 
                font_name: app.current_font
                font_size: 70
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                valign: 'middle'
                halign: 'center'
                background_color: 0, 0, 0, 0.5
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme
                multiline: False

            Button:
                text: '[ Lo.Gin ]'
                id: login_button
                on_press: root.handle_login_button()
                font_size: 70
                font_name: app.current_font
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0.7
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme
                color: app.color_scheme       
                 

                  
<MenuScreen>:

    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
                
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [0, 10, 0, 10]  # Removed right padding from here
                    
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.quit()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.05  # Takes exactly 10pc of screen height

        GridLayout:
            cols: 2  # Two columns
            rows: 3  # Three rows (will create 2x3 grid)
            padding: [20, 0]
            spacing: 0
            size_hint: 0.8, 0.75
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            
            # First row
            Button:
                text: 'Dev~'
                on_press: root.switch_to_dev_mode()
                font_size: 60
                font_name: app.current_font
                size_hint: (0.5, 0.1)
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'QuiZzz'
                on_press: root.switch_to_quiz_mode()
                font_size: 60
                font_name: app.current_font
                size_hint: (0.5, 0.1)
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            # Second row
            Button:
                text: '20d0'
                on_press: root.switch_to_todo_mode()
                font_size: 60
                font_name: app.current_font
                size_hint: (0.5, 0.1)
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'n0t3'
                on_press: root.switch_to_notes_mode()
                font_size: 60
                font_name: app.current_font
                size_hint: (0.5, 0.1)
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            # Third row
            Button:
                text: 'Le-Arn'
                on_press: root.switch_to_study_mode()
                font_size: 60
                font_name: app.current_font
                size_hint: (0.5, 0.1)
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'Set`In'
                on_press: root.switch_to_settings()
                font_size: 60
                font_name: app.current_font
                size_hint: (0.5, 0.1)
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height

                    
<CustomSpinnerOption>:
    background_normal: ''
    background_color: (0, 0, 0, 0.5)
    color: app.color_scheme
    font_size: 30
    font_name: app.current_font
    height: '40dp'
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0.5
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [5]
        Color:
            rgba: app.color_scheme
        Line:
            width: 1
            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
<DevModeScreen>:

    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
            
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [0, 10, 0, 10]  # Removed right padding from here
                
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
        # Rest of your content (takes remaining 90%)
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.9
            padding: [20, 20]
            spacing: 20
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            Button:
                text: 'New/Edit'
                font_size: 50
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'top'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.switch_to_edit_mode()
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Spinner:
                id: topic_spinner
                text: 'Topics'
                font_size: 50
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'bottom'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                option_cls: 'CustomSpinnerOption'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5 # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'Load Questions'
                font_size: 50
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'top'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_normal: ''
                background_color: 0, 0, 0, 0  # Make transparent
                color: app.color_scheme
                on_press: root.load_questions()
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Label:
                id: question_label
                text: ''
                font_size: 60
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                text_size: self.width, None
                size_hint: (0.9, 0.3)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme  # initially invisible
                opacity: 1
                    
            Label:
                id: answer_label
                text: ''
                font_size: 60
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                text_size: self.width, None
                size_hint: (0.9, 0.3)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme  # initially invisible
                opacity: 0


            BoxLayout:
                size_hint: (0.8, 0.08)
                spacing: 20
                padding: [20, 20]
                pos_hint: {'center_x': 0.5}
                spacing: 20

                Button:
                    text: 'Answer'
                    background_normal: ''
                    font_size: 50
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.toggle_answer()
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                Button:
                    text: 'Next'
                    background_normal: ''
                    font_size: 50
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.next_question()
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

<ToDoScreen>:

    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1
            padding: [10, 0, 10, 0]

            # Date label
            Label:
                text: root.current_date
                font_size: 40
                font_name: app.current_font
                size_hint_x: 0.9
                valign: 'center'
                halign: 'right'
                color: app.color_scheme
                text_size: self.width, None
            
            # Back button container
            BoxLayout:
                size_hint_x: 0.1
                padding: [0, 10, 0, 10]
                
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
        
        # Main content area (90%)
        ScrollView:
            id: scroll_view
            size_hint_y: 0.73
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: 50
                padding: [20, 20]
                
                # Task buttons
                TaskButton:
                    text: 'Drink Water Lots'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'Do Quiz'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'Check Belongings'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'Sleep at 10pm'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'Up by 730am'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'Cook Eggs'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'No acting cute'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'No Immature Talk'
                    on_press: root.toggle_task(self)
                TaskButton:
                    text: 'Insight'
                    on_press: root.toggle_task(self)
        
        # Submit button area (10%)
        BoxLayout:
            size_hint: (0.8, 0.17)
            spacing: 20
            padding: [20, 20]
            pos_hint: {'center_x': 0.5}
            spacing: 20
                
            Button:
                text: 'Submit'
                font_size: 50
                font_name: app.current_font
                size_hint: (1, 0.7)  # Take full width of container
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.send_email()
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
 
<TaskButton@Button>:
    font_size: 40
    font_name: app.current_font
    size_hint: (0.8, None)
    height: 80
    pos_hint: {'center_x': 0.5}
    background_normal: ''
    background_color: 0, 0, 0, 0.5
    color: app.color_scheme
    canvas.before:
        Color:
            rgba: app.color_scheme
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [5]
        Color:
            rgba: app.color_scheme
        Line:
            width: 1
            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)


<NoteItem>:
    orientation: 'horizontal'
    size_hint_y: None
    #height: '50dp'
    spacing: '10dp'
    pos_hint: {'top': 1}

    Button:
        text: '[x]'
        font_size: 20
        size_hint_x: 0.02
        size: 25, 25
        pos_hint: {'left': 1, 'top': 1}
        on_press: root.delete_note()
        background_normal: ''
        background_color: (0, 0, 0, 0)
        color: app.color_scheme
        halign: 'left'
        valign: 'top'
    
    Label:
        id: note_text
        text: root.note_text
        size_hint_x: 0.98
        font_size: 40
        font_name: app.current_font
        color: app.color_scheme
        halign: 'left'
        valign: 'top'
        text_size: self.width, None
        size_hint_y: None
        #height: self.texture_size[1] + dp(20)

<NotesScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
                
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [0, 10, 0, 10]  # Removed right padding from here
                    
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

        # New note input area
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.2
            padding: [70, 10]
            spacing: 10
            
            TextInput:
                id: note_input
                hint_text: 'Enter new note...'
                font_name: app.current_font
                font_size: 40
                size_hint_y: 0.3
                background_color: (0, 0, 0, 0.5)
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme
                multiline: True
                    
        # Notes display area
        ScrollView:
            size_hint_y: 0.6           
            BoxLayout:
                id: notes_container
                orientation: 'vertical'
                size_hint: (1, None)
                height: self.minimum_height
                spacing: 20
                padding: [70, 20]

        # Submit button area (10%)
        BoxLayout:
            size_hint: (0.8, 0.17)
            spacing: 20
            padding: [20, 20]
            pos_hint: {'center_x': 0.5}
            spacing: 20
                
            Button:
                text: 'Save Note'
                font_size: 50
                font_name: app.current_font
                size_hint: (1, 0.7)  # Take full width of container
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.save_note()
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
<SettingsScreen>:

    BoxLayout:
        orientation: 'vertical'
        padding: [20, 10]
        spacing: 20
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
            
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [2, 10, 0, 10]  # Removed right padding from here
                
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
        
        ScrollView:
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.8
                spacing: 50
                padding: [20, 0]
                pos_hint: {'center_x': 0.5}  # Center horizontally
                                    
                # Sound Section
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8  # Take 80% width
                    pos_hint: {'center_x': 0.5}  # Center horizontally

                    Label:
                        text: 'Sound'
                        font_size: 60
                        font_name: app.current_font
                        size_hint_y: 0.5
                        color: app.color_scheme
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 0.5
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [5]
                            Color:
                                rgba: app.color_scheme
                            Line:
                                width: 1
                                rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
                    BoxLayout:
                        size_hint_y: 0.5
                        spacing: 20
                        Button:
                            text: 'Jazzy'
                            font_size: 40
                            on_press: app.change_music('music1.mp3')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Trippy'
                            font_size: 40
                            on_press: app.change_music('music2.mp3')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Happy'
                            font_size: 40
                            on_press: app.change_music('music3.mp3')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                
                # Look Section
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8  # Take 80% width
                    pos_hint: {'center_x': 0.5}  # Center horizontally

                    Label:
                        text: 'Colour'
                        font_size: 60
                        font_name: app.current_font
                        size_hint_y: 0.5
                        color: app.color_scheme
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 0.5
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [5]
                            Color:
                                rgba: app.color_scheme
                            Line:
                                width: 1
                                rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
                    BoxLayout:
                        size_hint_y: 0.5
                        spacing: 20
                        Button:
                            text: 'Dark'
                            font_size: 40
                            on_press: app.change_color_scheme('Dark')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Techno'
                            font_size: 40
                            on_press: app.change_color_scheme('Techno')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Dull'
                            font_size: 40
                            on_press: app.change_color_scheme('Dull')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                
                # Image Section
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8  # Take 80% width
                    pos_hint: {'center_x': 0.5}  # Center horizontally

                    Label:
                        text: 'Image'
                        font_size: 60
                        font_name: app.current_font
                        size_hint_y: 0.5
                        color: app.color_scheme
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 0.5
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [5]
                            Color:
                                rgba: app.color_scheme
                            Line:
                                width: 1
                                rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
                    BoxLayout:
                        size_hint_y: 0.5
                        spacing: 20
                        Button:
                            text: 'You'
                            font_size: 40
                            on_press: app.change_bg_image('bg1.jpg')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Me'
                            font_size: 40
                            on_press: app.change_bg_image('bg2.jpg')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Who'
                            font_size: 40
                            on_press: app.change_bg_image('bg3.jpg')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                
                # Font Section
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8  # Take 80% width
                    pos_hint: {'center_x': 0.5}  # Center horizontally

                    Label:
                        text: 'Text'
                        font_size: 60
                        font_name: app.current_font
                        size_hint_y: 0.5
                        color: app.color_scheme
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 0.5
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [5]
                            Color:
                                rgba: app.color_scheme
                            Line:
                                width: 1
                                rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
                    BoxLayout:
                        size_hint_y: 0.5
                        spacing: 20
                        Button:
                            text: 'Chi'
                            font_size: 40
                            on_press: app.change_font('Hanyi.ttf')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Eng'
                            font_size: 40
                            on_press: app.change_font('Tox.ttf')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Both'
                            font_size: 40
                            on_press: app.change_font('zpix.ttf')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme                    

                # Quote Section
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8  # Take 80% width
                    pos_hint: {'center_x': 0.5}  # Center horizontally

                    Label:
                        text: 'Quote'
                        font_size: 60
                        font_name: app.current_font
                        size_hint_y: 0.5
                        color: app.color_scheme
                        canvas.before:
                            Color:
                                rgba: 0, 0, 0, 0.5
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [5]
                            Color:
                                rgba: app.color_scheme
                            Line:
                                width: 1
                                rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
                    BoxLayout:
                        size_hint_y: 0.5
                        spacing: 20
                        Button:
                            text: 'Clap'
                            font_size: 40
                            on_press: app.change_quotes('clap')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Slap'
                            font_size: 40
                            on_press: app.change_quotes('slap')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme
                        Button:
                            text: 'Flap'
                            font_size: 40
                            on_press: app.change_quotes('flap')
                            font_name: app.current_font
                            background_normal: ''
                            background_color: 0, 0, 0, 0.5
                            color: app.color_scheme          


<EditTopicScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: [0, 0, 0, 20] 
        spacing: 0
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
            
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [2, 10, 0, 0]  # Removed right padding from here
                
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_dev_mode()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
        # Rest of your content (takes remaining 90%)
        BoxLayout:
            orientation: 'vertical'
            size_hint: (0.8, 0.9)
            padding: [20, 0]
            spacing: 10
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            
            # Topic input section
            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.08
                spacing: 10

                TextInput:
                    id: topic_input
                    hint_text: 'enter topic name..'
                    font_size: 40
                    font_name: app.current_font
                    size_hint: (0.5, 0.6)
                    background_color: 0, 0, 0, 0.5
                    foreground_color: app.color_scheme
                    cursor_color: app.color_scheme
                    multiline: False

                Button:
                    text: 'GET'
                    font_size: 40
                    font_name: app.current_font
                    size_hint: (0.25, 0.6)
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.check_topic()
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                
                Button:
                    text: 'DEL'
                    font_size: 40
                    font_name: app.current_font
                    size_hint: (0.25, 0.6)
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.delete_topic()
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
            
            # Status label
            Label:
                id: status_label
                text: ''
                font_size: 40
                font_name: app.current_font
                size_hint_y: 0.05
                color: app.color_scheme
                halign: 'center'


            TextInput:
                id: question_input
                hint_text: 'question here'
                font_size: 40
                font_name: app.current_font
                size_hint_y: 0.35
                background_color: 0, 0, 0, 0.5
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme
                multiline: True


            TextInput:
                id: answer_input
                hint_text: 'answer here'
                font_size: 40
                font_name: app.current_font
                size_hint_y: 0.35
                background_color: 0, 0, 0, 0.5
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme
                multiline: True

            # Add button
            Button:
                text: 'Add Question'
                font_size: 40
                font_name: app.current_font
                size_hint_y: 0.08
                background_normal: ''
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.add_question()
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)



<Popup>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, 0.8
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: 0, 0, 0, 0.5
        RoundedRectangle:
            pos: self.pos[0] + 20, self.pos[1] + 20
            size: self.size[0] - 40, self.size[1] - 40
            radius: [10]
        Color:
            rgba: app.color_scheme
        Line:
            width: 1.5
            rounded_rectangle: (self.x + 20, self.y + 20, self.width - 40, self.height - 40, 10)


<QuizSingleScreen>:

    BoxLayout:
        orientation: 'vertical'
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
            
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [2, 10, 0, 10]  # Removed right padding from here
                
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
        # Rest of your content (takes remaining 90%)
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.8
            padding: [20, 0]
            spacing: 10
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.07
                size_hint_x: 0.8
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                spacing: 3
                Label:
                    id: quiz_single_title
                    text: 'Single Minded'
                    font_size: 40
                    font_name: app.current_font
                    valign: 'middle'
                    halign: 'left'
                    text_size: self.width, None
                    size_hint_x: 0.5
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    color: app.color_scheme 
                    
                Label:
                    id: quiz_single_intro
                    text: '- choose topic\n- answer all'
                    font_size: 30
                    font_name: app.current_font
                    valign: 'middle'
                    halign: 'right'
                    text_size: self.width, None
                    size_hint_x: 0.5
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    color: app.color_scheme 

            Spinner:
                id: topic_spinner
                text: 'Topics'
                font_size: 40
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'bottom'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                option_cls: 'CustomSpinnerOption'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5 # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'Start'
                font_size: 40
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'top'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_normal: ''
                background_color: 0, 0, 0, 0  # Make transparent
                color: app.color_scheme
                on_press: root.load_questions()
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Label:
                id: question_label
                text: ''
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0.5  # Make transparent
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme  # initially invisible
                opacity: 1
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]

            TextInput:
                id: answer_input
                hint_text: '?'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                foreground_color: app.color_scheme
                background_color: 0, 0, 0, 0.2  # Make transparent
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color

            Label:
                id: answer_label
                hint_text: 'actual answer'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme
                opacity: 0
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]

            BoxLayout:
                size_hint: (0.8, 0.08)
                spacing: 10
                padding: [0, 20]
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                Button:
                    text: 'Answer'
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.toggle_answer()
                    size_hint_y: 1
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                Button:
                    text: 'Correct'
                    id: correct_button
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.mark_correct()
                    size_hint_y: 1
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                Button:
                    text: 'Next'
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.next_question()
                    size_hint_y: 1
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

<QuizOGScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only
            pos_hint: {'center_x':0.5, 'center_y':0.5}
            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                pos_hint: {'center_x':0.5, 'center_y':0.5}
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
            
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [2, 10, 0, 0]  # Removed right padding from here
                pos_hint: {'center_x':0.5, 'center_y':0.5}
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.8
            spacing: 10
            padding: [20, 0]
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}                    
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (0.8, 0.08)
                spacing: 10
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                Label:
                    id: quiz_all_title
                    text: "Golden Mean"
                    font_size: 40
                    font_name: app.current_font
                    valign: 'middle'
                    halign: 'left'
                    text_size: self.width, None
                    size_hint: (0.5, 0.6)
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    color: app.color_scheme 

                TextInput:
                    id: code_input
                    hint_text: 'code'
                    font_size: 40
                    font_name: app.current_font
                    size_hint: (0.3, 0.6)
                    valign: 'middle'
                    halign: 'center'
                    pos_hint: {'center_x' : 0.5, 'center_y' : 0.5}
                    background_color: (0, 0, 0, 0.5)
                    foreground_color: app.color_scheme
                    cursor_color: app.color_scheme
                    valign: 'center'
                    halign: 'center'
                    multiline: False
                    color: app.color_scheme

                Button:
                    id: verify_code 
                    on_press: root.verify()
                    text: 'verify'
                    font_size: 40
                    font_name: app.current_font
                    size_hint: (0.2, 0.6)
                    pos_hint: {'center_x' : 0.5, 'center_y' : 0.5}
                    background_color: (0, 0, 0, 0)
                    foreground_color: app.color_scheme
                    valign: 'center'
                    halign: 'center'
                    color: app.color_scheme # canvas.before must follow color:
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5 # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Label:
                id: topic_label
                text: ''
                font_size: 40
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'bottom'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5 # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Label:
                id: question_label
                hint_text: 'question'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0.5  # Make transparent
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]


            TextInput:
                id: answer_input
                hint_text: '?'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                foreground_color: app.color_scheme
                background_color: 0, 0, 0, 0.2  # Make transparent
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color

            Label:
                id: answer_label
                hint_text: 'actual answer'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                opacity: 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]


            BoxLayout:
                size_hint: (0.8, 0.08)
                spacing: 10
                padding: [0, 20]
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                Button:
                    text: 'Answer'
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    on_press: root.toggle_answer()
                    size_hint: (0.3, 1)
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                Button:
                    id: correct_button
                    text: 'Correct'
                    background_normal: ''
                    size_hint: (0.3, 1)
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    on_press: root.mark_correct()
                    opacity: 1
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                Button:
                    text: 'Next'
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.next_question()
                    size_hint: (0.3, 1)
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5) 

<QuizAllScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
            
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [2, 10, 0, 10]  # Removed right padding from here
                
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
        # Rest of your content (takes remaining 90%)
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.8
            spacing: 10
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
            BoxLayout:
                spacing: 10
                orientation: 'horizontal'
                size_hint_y: 0.07
                size_hint_x: 0.8
                pos_hint: {'center_x': 0.5, 'center_y': 0.5} 
                Label:
                    id: quiz_all_title
                    text: "Pandora's Box"
                    font_size: 40
                    font_name: app.current_font
                    valign: 'middle'
                    halign: 'left'
                    text_size: self.width, None
                    size_hint_x: 0.5
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    color: app.color_scheme 

                Label:
                    id: quiz_all_intro
                    text: '- random topic\n- ten questions'
                    font_size: 30
                    font_name: app.current_font
                    valign: 'middle'
                    halign: 'right'
                    text_size: self.width, None
                    size_hint_x: 0.5
                    pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                    color: app.color_scheme 

            Label:
                id: topic_label
                text: ''
                font_size: 40
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'bottom'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5 # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'Start'
                font_size: 40
                font_name: app.current_font
                size_hint: (0.8, 0.06)
                valign: 'top'
                halign: 'center'
                pos_hint: {'center_x': 0.5}
                background_normal: ''
                background_color: 0, 0, 0, 0  # Make transparent
                color: app.color_scheme
                on_press: root.load_questions()
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Label:
                id: question_label
                hint_text: 'question'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                background_color: 0, 0, 0, 0.5  # Make transparent
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]


            TextInput:
                id: answer_input
                hint_text: '?'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                background_normal: ''
                foreground_color: app.color_scheme
                background_color: 0, 0, 0, 0.2  # Make transparent
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color

            Label:
                id: answer_label
                hint_text: 'actual answer'
                font_size: 40
                font_name: app.current_font
                valign: 'middle'
                halign: 'center'
                text_size: self.width, None
                size_hint: (0.8, 0.2)
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                color: app.color_scheme
                opacity: 0
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]


            BoxLayout:
                size_hint: (0.8, 0.08)
                spacing: 10
                padding: [0, 20]
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                Button:
                    text: 'Answer'
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.toggle_answer()
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                Button:
                    id: correct_button
                    text: 'Correct'
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.mark_correct()
                    opacity: 1
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                Button:
                    text: 'Next'
                    background_normal: ''
                    font_size: 40
                    font_name: app.current_font
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    on_press: root.next_question()
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5  # Button fill color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme # Border color
                        Line:
                            width: 1
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

<StudyScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: 0
        spacing: 0
        
        # Top 10pc container
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1  # Takes exactly 10pc of screen height
            padding: [10, 0, 10, 0]  # Left/right padding only

            # Main content area (90% width)
            BoxLayout:
                size_hint_x: 0.9
                orientation: 'horizontal'
                
                # Rolling quote (takes available space)
                RollingQuoteLabel:
                    id: rolling_quote
                    text: "In Key-Wiz We Trust"
                    font_size: 40
                    font_name: app.current_font
                    size_hint_x: 1
                    valign: 'center'
                    halign: 'right'
                    color: app.color_scheme
                    text_size: self.width, None
                    shorten: True
                    shorten_from: 'right'
            
            # Back button container (10% width)
            BoxLayout:
                size_hint_x: 0.1
                padding: [2, 10, 0, 10]  # Removed right padding from here
                
                Button:
                    id: back_button
                    text: 'O.o'
                    on_press: root.back_to_root()
                    font_size: 40
                    font_name: app.current_font
                    size_hint: None, None
                    size: 60, 60
                    pos_hint: {'right': 1, 'center_y': 0.5}
                    background_normal: ''
                    background_color: 0, 0, 0, 0
                    color: app.color_scheme
                    canvas.before:
                        Color:
                            rgba: 0, 0, 0, 0.5
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [5]
                        Color:
                            rgba: app.color_scheme
                        Line:
                            width: 1.5
                            rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

        #folder buttons
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (0.8, 0.07)
            spacing: 10
            padding: [10, 10]
            pos_hint: {'center_x': 0.5}

            Button:
                text: 'R.'
                background_normal: ''
                font_size: 40
                font_name: app.current_font
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.change_dir('ray')
                size_hint_y: 1
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'L.'
                id: correct_button
                background_normal: ''
                font_size: 40
                font_name: app.current_font
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.change_dir('lela')
                size_hint_y: 1
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'K.'
                background_normal: ''
                font_size: 40
                font_name: app.current_font
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.change_dir('khole')
                size_hint_y: 1
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'M.'
                id: correct_button
                background_normal: ''
                font_size: 40
                font_name: app.current_font
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.change_dir('misc')
                size_hint_y: 1
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'Q.'
                background_normal: ''
                font_size: 40
                font_name: app.current_font
                background_color: 0, 0, 0, 0
                color: app.color_scheme
                on_press: root.change_dir('quote')
                size_hint_y: 1
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5  # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                    
        # load file row, 10%
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (0.8, 0.07)
            padding: [10, 10]
            spacing: 10
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}
        
            Spinner:
                id: file_spinner
                text: ''
                font_size: 40
                font_name: app.current_font
                size_hint: (0.5, 1)
                pos_hint: {'center_x': 0.5}
                background_color: (0, 0, 0, 0)
                color: app.color_scheme
                option_cls: 'CustomSpinnerOption'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5 # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

            Button:
                text: 'Load'
                font_name: app.current_font
                font_size: 40
                size_hint: (0.2, 1)
                pos_hint: {'center_x': 0.5}       
                background_normal: ''
                background_color: (0, 0, 0, 0.5)
                color: app.color_scheme
                on_press: root.load_file()
                
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (0.8, 0.07)
            padding: [10, 10]
            spacing: 10
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            TextInput:
                id: filename_input
                text_hint: ''
                multiline: False
                size_hint: (0.5, 1)
                pos_hint: {'center_x': 0.5}
                font_name: app.current_font
                font_size: 40
                background_color: (0, 0, 0, 0.5)
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5 # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)

                    
            Button:
                text: 'Create'
                font_name: app.current_font
                font_size: 40
                size_hint: (0.2, 1)
                pos_hint: {'center_x': 0.5}
                background_normal: ''
                background_color: (0, 0, 0, 0.5)
                color: app.color_scheme
                on_press: root.create_file()

        BoxLayout:
            orientation: 'vertical'
            padding: [10, 10]
            spacing: 10
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}

            TextInput:
                id: content_input
                multiline: True
                size_hint: (0.8, 1)
                font_name: app.current_font
                font_size: 40
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}                    
                background_color: (0, 0, 0, 0.5)
                foreground_color: app.color_scheme
                cursor_color: app.color_scheme  
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 0.5 # Button fill color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [5]
                    Color:
                        rgba: app.color_scheme # Border color
                    Line:
                        width: 1
                        rounded_rectangle: (self.x, self.y, self.width, self.height, 5)
                        
            Button:
                id: save_button
                text: 'Save'
                font_name: app.current_font
                font_size: 40
                size_hint: (0.8, 0.07)
                pos_hint: {'center_x': 0.5}                
                background_normal: ''
                background_color: (0, 0, 0, 0.5)
                color: app.color_scheme
                on_press: root.save_file()
                    
            Label:
                id: status_label
                text: ''
                pos_hint: {'center_x': 0.5}                
                size_hint: (0.8, 0.05)
                font_name: app.current_font
                font_size: 30
                opacity: 0
                size_hint_y: None
            